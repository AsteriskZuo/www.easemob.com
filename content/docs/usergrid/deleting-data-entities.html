<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Easemob - 即时通讯云-五分钟为你的APP加入聊天功能。" name="description">
    <meta content="Easemob" name="author">
    <title>Deleting Data Entities | Easemob</title>
    <link href="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/docs.css" rel="stylesheet">
    <link href="http://cdn.bootcss.com/highlight.js/7.3/styles/github.min.css" rel="stylesheet">
    <style type="text/css">
      body{font-family:"ff-tisa-web-pro-1","ff-tisa-web-pro-2","Lucida Grande","Helvetica Neue",Helvetica,Arial,"Hiragino Sans GB","Hiragino Sans GB W3","WenQuanYi Micro Hei",sans-serif;}
      h1, .h1, h2, .h2, h3, .h3, h4, .h4, .lead {font-family:"ff-tisa-web-pro-1","ff-tisa-web-pro-2","Lucida Grande","Helvetica Neue",Helvetica,Arial,"Hiragino Sans GB","Hiragino Sans GB W3","Microsoft YaHei UI","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;}
      pre code { background: transparent; }
      @media (min-width: 768px) {
          .bs-docs-home .bs-social,
          .bs-docs-home .bs-masthead-links {
            margin-left: 0;
          }
      }
    </style>
    <!--[if lt IE 9]
    script  type='text/javascript' src=("/assets/js/ie8-responsive-file-warning.js" ) 
    script  type='text/javascript' src=("http://cdn.bootcss.com/html5shiv/3.7.0/html5shiv.min.js" ) 
    script  type='text/javascript' src=("http://cdn.bootcss.com/respond.js/1.3.0/respond.min.js" ) -->
    <link href="/assets/ico/apple-touch-icon-144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
    <link href="/assets/ico/favicon.ico" rel="shortcut icon">
  </head>
  <body><div id="content" class="bs-header">
  <div class="container">
    <h1>
      Deleting Data Entities
    </h1>
    <p>
      Easemob
    </p>
  </div>
</div>
<div class="container bs-docs-container">
  <div class="row">
    <div class="col-md-12" role="main">
<h1 id="deleting-data-entities">Deleting Data Entities</h1>

<p>This article describes how to delete data entities.</p>

<p><strong>Note:</strong>Although not shown in the API examples below, you need to
provide a valid access token with each API call. See <a href="/authenticating-users-and-application-clients">Authenticating
users and application
clients</a> for details.</p>

<h2 id="deleting-an-entity">Deleting an entity</h2>

<ul>
  <li><a href="#curl_delete_entity">cURL</a></li>
  <li><a href="#ios_delete_entity">iOS</a></li>
  <li><a href="#android_delete_entity">Android</a></li>
  <li><a href="#javascript_delete_entity">JavaScript (HTML5)</a></li>
  <li><a href="#ruby_delete_entity">Ruby</a></li>
  <li><a href="#nodejs_delete_entity">Node.js</a></li>
</ul>

<h3 id="example-requestresponse">Example Request/Response</h3>

<h4 id="request">Request:</h4>

<p>Delete by UUID:</p>

<pre><code>curl -X DELETE "https://api.usergrid.com/your-org/your-app/items/da4a50dc-38dc-11e2-b2e4-02e81adcf3d0"
</code></pre>

<p>Delete by 'name' property:</p>

<pre><code>curl -X DELETE "https://api.usergrid.com/your-org/your-app/items/milk"
</code></pre>

<h4 id="response">Response:</h4>

<pre><code>{
  "action" : "delete",
  "application" : "f34f4222-a166-11e2-a7f7-02e81adcf3d0",
  "params" : { },
  "path" : "/items",
  "uri" : "http://api.usergrid.com/your-org/your-app/items",
  "entities" : [ {
    "uuid" : "328fe64a-19a0-11e3-8a2a-ebc6f49d1fc4",
    "type" : "item",
    "name" : "milk",
    "created" : 1378766158500,
    "modified" : 1378766158500,
    "metadata" : {
      "path" : "/items/328fe64a-19a0-11e3-8a2a-ebc6f49d1fc4"
    },
    "name" : "milk",
    "price" : "3.25"
  } ],
  "timestamp" : 1378766172016,
  "duration" : 324,
  "organization" : "your-org",
  "applicationName" : "your-app"
}
</code></pre>

<h3 id="request-syntax">Request Syntax</h3>

<pre><code>curl -X DELETE https://api.usergrid.com/&lt;org&gt;/&lt;app&gt;/&lt;collection&gt;/&lt;entity&gt;
</code></pre>

<h3 id="parameters">Parameters</h3>

<p>Parameter    Description
  ———— —————————————-
  org          Organization UUID or organization name
  app          Application UUID or application name
  collection   Collection UUID or collection name
  entity       Entity UUID or entity name</p>

<p>This example uses the <a href="/app-services-sdks#ios">Apache Usergrid iOS SDK</a>.</p>

<h3 id="example-requestresponse-1">Example Request/Response</h3>

<h4 id="request-1">Request:</h4>

<pre><code>-(NSString*)deleteEntity {

    //specify the entity type to be deleted 
    NSString *type = @"item";
    
    //specify the uuid or name of the entity to be deleted
    NSString *entityId = @"milk";
    
    //we recommend you call ApigeeClient from your AppDelegate. 
    //for more information see the iOS SDK install guide: http://apigee.com/docs/app-services/content/installing-apigee-sdk-ios
    //create an instance of AppDelegate
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    
    //call createEntity to initiate the API call
    ApigeeClientResponse *response = [appDelegate.dataClient removeEntity:type entityID:entityId];
    
    @try {
        //success
    }
    @catch (NSException * e) {
        //fail
    }

}
</code></pre>

<h4 id="response-1">Response:</h4>

<pre><code>{
  "action" : "delete",
  "application" : "f34f4222-a166-11e2-a7f7-02e81adcf3d0",
  "params" : { },
  "path" : "/items",
  "uri" : "http://api.usergrid.com/your-org/your-app/items",
  "entities" : [ {
    "uuid" : "328fe64a-19a0-11e3-8a2a-ebc6f49d1fc4",
    "type" : "item",
    "name" : "milk",
    "created" : 1378766158500,
    "modified" : 1378766158500,
    "metadata" : {
      "path" : "/items/328fe64a-19a0-11e3-8a2a-ebc6f49d1fc4"
    },
    "name" : "milk",
    "price" : "3.25"
  } ],
  "timestamp" : 1378766172016,
  "duration" : 324,
  "organization" : "your-org",
  "applicationName" : "your-app"
}
</code></pre>

<h3 id="sdk-method">SDK Method</h3>

<pre><code>(ApigeeClientResponse *)removeEntity: (NSString *)type entityID:(NSString *)entityID
</code></pre>

<h3 id="properties">Properties</h3>

<p>Parameter   Description
  ———– ———————————————-
  type        The entity type being deleted
  entityID    The UUID or name of the entity to be removed</p>

<p>This example uses the <a href="/app-services-sdks#android">Apache Usergrid Android
SDK</a>.</p>

<h3 id="example-requestresponse-2">Example Request/Response</h3>

<h4 id="request-2">Request:</h4>

<pre><code>//Create client entity
String ORGNAME = "your-org";
String APPNAME = "your-app";        
ApigeeClient apigeeClient = new ApigeeClient(ORGNAME,APPNAME);
DataClient dataClient = apigeeClient.getDataClient();

String type = "item"; //entity type to be retrieved
String uuid = "b3aad0a4-f322-11e2-a9c1-999e12039f87";
    
//call removeEntityAsync to initiate the asynchronous API call    
dataClient.removeEntityAsync(type, uuid, new ApiResponseCallback() {    

//If removeEntityAsync fails, catch the error
@Override
public void onException(Exception e) { 
    // Error
}

//If removeEntityAsync is successful, handle the response object
@Override
public void onResponse(ApiResponse response) {
    try { 
        if (response != null) {
            // Success
        }
    } catch (Exception e) { //The API request returned an error
            // Fail
    }
}
}); 
</code></pre>

<h4 id="response-2">Response:</h4>

<pre><code>{"action":"delete","application":"f34f4222-a166-11e2-a7f7-02e81adcf3d0","entities":[{"dataClient":{"accessToken":null,"apiUrl":"https://api.usergrid.com","applicationId":"your-app","clientId":null,"clientSecret":null,"currentOrganization":null,"loggedInUser":null,"organizationId":"your-org"},"type":"item","uuid":"d1511d7a-19a1-11e3-b02b-cd5b309a29fa","created":1378766854343,"name":"milk","modified":1378766854343,"metadata":{"path":"/items/d1511d7a-19a1-11e3-b02b-cd5b309a29fa"}}],"params":{},"path":"/items","rawResponse":"{
  "action" : "delete",
  "application" : "f34f4222-a166-11e2-a7f7-02e81adcf3d0",
  "params" : { },
  "path" : "/items",
  "uri" : "http://api.usergrid.com/your-org/your-app/items",
  "entities" : [ {
    "uuid" : "d1511d7a-19a1-11e3-b02b-cd5b309a29fa",
    "type" : "item",
    "name" : "milk",
    "created" : 1378766854343,
    "modified" : 1378766854343,
    "metadata" : {
      "path" : "/items/d1511d7a-19a1-11e3-b02b-cd5b309a29fa"
    },
    "name" : "milk",
    "price" : "3.25"   
  } ],
  "timestamp" : 1378767852615,
  "duration" : 276,
  "organization" : "your-org",
  "applicationName" : "your-app"
}
","uri":"http://api.usergrid.com/your-org/your-app/items","timestamp":1378767852615,"entityCount":1,"firstEntity":{"dataClient":{"accessToken":null,"apiUrl":"https://api.usergrid.com","applicationId":"your-app","clientId":null,"clientSecret":null,"currentOrganization":null,"loggedInUser":null,"organizationId":"your-org"},"type":"item","uuid":"d1511d7a-19a1-11e3-b02b-cd5b309a29fa","created":1378766854343,"name":"milk","modified":1378766854343,"metadata":{"path":"/items/d1511d7a-19a1-11e3-b02b-cd5b309a29fa"}},"lastEntity":{"dataClient":{"accessToken":null,"apiUrl":"https://api.usergrid.com","applicationId":"your-app","clientId":null,"clientSecret":null,"currentOrganization":null,"loggedInUser":null,"organizationId":"your-org"},"type":"item","uuid":"d1511d7a-19a1-11e3-b02b-cd5b309a29fa","created":1378766854343,"name":"milk","price" : "3.25","modified":1378766854343,"metadata":{"path":"/items/d1511d7a-19a1-11e3-b02b-cd5b309a29fa"}},"organization":"your-org","duration":276,"applicationName":"your-app"}
</code></pre>

<h3 id="sdk-method-1">SDK Method</h3>

<pre><code>removeEntity(String entityType, String entityID)
</code></pre>

<h3 id="properties-1">Properties</h3>

<p>Parameter    Description
  ———— ———————————————-
  entityType   The entity type of the entity to be deleted
  entityID     The UUID or name of the entity to be deleted</p>

<p>This example uses the <a href="/app-services-sdks#javascript">Apache Usergrid JavaScript (HTML5)
SDK</a>.</p>

<h3 id="example-requestresponse-3">Example Request/Response</h3>

<h4 id="request-3">Request:</h4>

<pre><code>//create the basic client object
var dataClient = new Usergrid.Client({
    org_name:'your-org',
    app_name:'your-app'
});

//specify the properties of the entity to be deleted
//type is required. UUID or name of the entity to be deleted is also required
    var properties = {
    client:client,
    data:{'type':'item',
    uuid:'39d25cca-03ad-11e3-a25d-71468ad53e11'
    }
};

//create the entity object
var entity = new Usergrid.Entity(properties);

//call destroy() to initiate the API DELETE request
entity.destroy(function (error) {

if (error) { 
    // Error
} else {
    // Success
}

});     
</code></pre>

<h4 id="response-3">Response:</h4>

<p>The API will respond with 404 Resource Not Found.</p>

<h3 id="sdk-method-2">SDK Method</h3>

<pre><code>entity.destroy(callback)
</code></pre>

<h3 id="parameters-1">Parameters</h3>

<p>Parameter   Description
  ———– ———————————————-
  callback    Callback function to handle the API response</p>

<h3 id="example-requestresponse-4">Example Request/Response</h3>

<h4 id="request-4">Request:</h4>

<pre><code>#Create a client object
usergrid_api = 'https://api.usergrid.com'
organization = 'your-org'
application = 'your-app'

client = Usergrid::Application.new "#{usergrid_api}/#{organization}/#{application}"

begin
    client['items']['milk'].entity.delete
rescue
    #fail
end
</code></pre>

<h4 id="response-4">Response:</h4>

<pre><code>{
  "action" : "delete",
  "application" : "f34f4222-a166-11e2-a7f7-02e81adcf3d0",
  "params" : { },
  "path" : "/items",
  "uri" : "http://api.usergrid.com/your-org/your-app/items",
  "entities" : [ {
    "uuid" : "328fe64a-19a0-11e3-8a2a-ebc6f49d1fc4",
    "type" : "item",
    "name" : "milk",
    "created" : 1378766158500,
    "modified" : 1378766158500,
    "metadata" : {
      "path" : "/items/328fe64a-19a0-11e3-8a2a-ebc6f49d1fc4"
    },
    "name" : "milk",
    "price" : "3.25"
  } ],
  "timestamp" : 1378766172016,
  "duration" : 324,
  "organization" : "your-org",
  "applicationName" : "your-app"
}
</code></pre>

<h3 id="sdk-method-3">SDK Method</h3>

<pre><code>delete
</code></pre>

<p>This example uses the <a href="/app-services-sdks#nodejs">Apache Usergrid Node.js
module</a>.</p>

<h3 id="example-requestresponse-5">Example Request/Response</h3>

<h4 id="request-5">Request:</h4>

<pre><code>//create the basic client object
var dataClient = new Usergrid.client({
org_name:'your-org',
app_name:'your-app'
});

//specify the properties of the entity to be deleted
//type is required. UUID or name of the entity to be deleted is also required
var properties = {
    client:dataClient,
    data:{
        'type':'item',
        'uuid':'39d25cca-03ad-11e3-a25d-71468ad53e11'
    }
};

//create the entity object
var entity = new Usergrid.entity(properties);

//call destroy() to initiate the API DELETE request
entity.destroy(function (error) {

    if (error) { 
        // Error
    } else {
        // Success
    }

});     
</code></pre>

<h4 id="response-5">Response:</h4>

<pre><code>{ action: 'delete',
  application: 'f34f4222-a166-11e2-a7f7-02e81adcf3d0',
  params: {},
  path: '/items',
  uri: 'http://api.usergrid.com/your-org/your-app/items',
  entities: 
   [ { uuid: 'f97c35ea-1a5b-11e3-b8a1-6f428da9ad88',
       type: 'item',
       name: 'milk',
       price: '3.25',
       created: 1378846808126,
       modified: 1378846808126,
       metadata: [Object] } ],
  timestamp: 1378847145757,
  duration: 285,
  organization: 'your-org',
  applicationName: 'your-app' }             
</code></pre>

<h3 id="sdk-method-4">SDK Method</h3>

<pre><code>entity.destroy(callback)
</code></pre>

<h3 id="parameters-2">Parameters</h3>

<p>Parameter   Description
  ———– ———————————————-
  callback    Callback function to handle the API response</p>

<p> </p>

    </div>
  </div>
</div><footer class="bs-footer" role="contentinfo">
      <div class="container">
        <p class="text-muted">
          环信即时通讯云
        </p>
      </div>
    </footer>
    <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="http://cdn.bootcss.com/holder/2.0/holder.min.js"></script>
    <script src="http://cdn.bootcss.com/highlight.js/7.3/highlight.min.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
      var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
      document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F3e5b3453fdcff1e4dec124ea22f1e189' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script src="/assets/js/application.js"></script>
  </body>
</html>