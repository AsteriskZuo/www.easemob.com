---
title: 环信
sidebar: gettingstartsidebar
secondnavgettingstart: true
---



##数据平滑迁移解决方案 {#move}


如何实现将自己聊天系统下的用户迁移到环信的聊天系统中，鉴于新用户已在环信聊天系统注册，而老的用户还在自己的系统上，如此，在环信的新用户和自己聊天系统下的用户无法通信，基于这种情况，给出如下三种方案：

    

1.客户端处理：在老用户和新用户发消息的时候，客户端做一个自动回复提醒，提示用户需要（强制）升级新版本客户端才可与对方进行通信

    

2.服务端处理：在老用户和新用户发消息的时候，老用户发送信息到自己的聊天系统中，聊天系统收到这条消息，由聊天系统给老用户一个自动回复提示，需要老用户升级更新才能与新用户通信

    

3.如果需要老用户和新用户互相通信，老用户（需要注册一个环信的id和老用户关联）可以发消息到自己的服务端，服务端来调环信的[rest接口](http://easemob.com/docs/rest/sendmessage/)给新用户发送消息，新用户收到对方的消息，回复消息给老用户，先走到环信服务器，环信服务器调用旁路接口（自己服务器提供的一个接口）到自己服务器上，再由自己服务器的聊天系统发消息给客户端

   
<font color='red'>注：在这里需要注意的是，新老用户之间发送文字容易处理，但是如果发送的消息里面带有附件情况，需要User Server提供可以上传下载附件的旁路接口，并且需要音视频转换的方法，目前环信客户端这边音频格式统一为amr格式</font>



![alt text](/move1.png "Title")


##注：如需了解数据迁移的详细过程，请联系环信